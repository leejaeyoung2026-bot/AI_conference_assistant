<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VORA - Real-time Intelligent Meeting Assistant</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6874320463657568"
     crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/enhanced-v2.css">
</head>

<body>
    <!-- Top Navigation -->
    <nav style="background: #0f172a; padding: 10px 20px; border-bottom: 1px solid rgba(255,255,255,0.05); display: flex; justify-content: space-between; align-items: center;">
        <a href="index_en.html" style="color: white; text-decoration: none; font-weight: 900; font-size: 0.9rem;"><i class="fas fa-arrow-left"></i> Home</a>
        <div style="display: flex; gap: 20px;">
            <a href="blog.html" style="color: #94a3b8; text-decoration: none; font-size: 0.8rem;">Tech Guide</a>
            <a href="admin.html" style="color: #94a3b8; text-decoration: none; font-size: 0.8rem;">System Status</a>
            <a href="app.html" style="color: #6366f1; text-decoration: none; font-size: 0.8rem; font-weight: 700;">KO</a>
        </div>
    </nav>

    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="logo">
                <i class="fas fa-magic"></i>
                <h1>VORA</h1>
                <span class="version-badge">v5.2</span>
            </div>
            <div class="header-controls">
                <div class="meeting-timer">
                    <i class="fas fa-clock"></i>
                    <span id="timer">00:00:00</span>
                </div>
                <!-- Speaker Indicator -->
                <div class="speaker-indicator primary" id="speakerIndicator">
                    <span class="speaker-icon">üë§</span>
                    <span class="speaker-label">Speaker</span>
                </div>
                <button class="btn btn-settings" id="settingsBtn" title="Settings">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Left: Transcription Panel -->
            <section class="panel transcription-panel">
                <div class="panel-header">
                    <h2><i class="fas fa-comment-dots"></i> Real-time Transcription</h2>
                    <div class="status-indicator" id="statusIndicator">
                        <span class="status-dot"></span>
                        <span class="status-text">Waiting</span>
                    </div>
                </div>

                <!-- Voice Visualizer -->
                <div class="voice-visualizer" id="voiceVisualizer">
                    <div class="visualizer-bars">
                        <span></span><span></span><span></span><span></span><span></span>
                        <span></span><span></span><span></span><span></span><span></span>
                    </div>
                </div>

                <!-- Control Buttons -->
                <div class="control-buttons">
                    <button class="btn btn-primary btn-large" id="startBtn">
                        <i class="fas fa-play"></i>
                        <span>Start Recording</span>
                    </button>
                    <button class="btn btn-warning btn-large" id="pauseBtn" disabled>
                        <i class="fas fa-pause"></i>
                        <span>Pause</span>
                    </button>
                    <button class="btn btn-danger btn-large" id="stopBtn" disabled>
                        <i class="fas fa-stop"></i>
                        <span>Stop Recording</span>
                    </button>
                </div>

                <!-- Speaker Settings -->
                <div class="speaker-controls">
                    <button class="btn btn-sm btn-outline" id="setPrimarySpeakerBtn" title="Set current speaker as primary">
                        <i class="fas fa-user-check"></i>
                        <span>Set Primary Speaker</span>
                    </button>
                </div>

                <!-- Real-time Text Display -->
                <div class="transcript-container">
                    <div class="current-speech" id="currentSpeech">
                        <p class="placeholder">Press the record button to start the meeting...</p>
                    </div>
                    <div class="transcript-history" id="transcriptHistory">
                        <!-- Transcribed text will appear here -->
                    </div>
                </div>
            </section>

            <!-- Middle: Q&A Panel -->
            <section class="panel analysis-panel">
                <!-- Question Detection -->
                <div class="sub-panel questions-panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-question-circle"></i> Detected Questions</h2>
                        <span class="badge" id="questionCount">0</span>
                    </div>
                    <div class="questions-list" id="questionsList">
                        <div class="empty-state">
                            <i class="fas fa-comment-slash"></i>
                            <p>No questions detected</p>
                        </div>
                    </div>
                </div>

                <!-- AI Answers -->
                <div class="sub-panel ai-answers-panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-robot"></i> AI Answers</h2>
                        <span class="badge badge-ai" id="answerCount">0</span>
                    </div>
                    <div class="ai-answers-list" id="aiAnswersList">
                        <div class="empty-state">
                            <i class="fas fa-magic"></i>
                            <p>Gemini AI will answer once a question is detected</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Right: Chat & Summary Panel -->
            <section class="panel analysis-panel">
                <!-- AI Chat -->
                <div class="sub-panel chat-panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-comments"></i> Chat with AI</h2>
                    </div>
                    <div class="chat-history" id="chatHistory">
                        <div class="empty-state">
                            <i class="fas fa-comment-dots"></i>
                            <p>Ask Gemini anything you're curious about</p>
                        </div>
                    </div>
                    <div class="chat-mode-selector">
                        <button class="mode-btn active" data-mode="question">
                            <i class="fas fa-question-circle"></i> Question
                        </button>
                        <button class="mode-btn" data-mode="memo">
                            <i class="fas fa-sticky-note"></i> Memo
                        </button>
                    </div>
                    <div class="chat-input-wrapper">
                        <input type="text" id="chatInput" placeholder="Type your question...">
                        <button id="chatSendBtn"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>

                <!-- Meeting Summary -->
                <div class="sub-panel summary-panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-file-alt"></i> Meeting Summary</h2>
                        <span class="badge badge-summary" id="summaryStatus">Waiting</span>
                    </div>
                    <div class="meeting-summary" id="meetingSummary">
                        <div class="empty-state">
                            <i class="fas fa-clipboard-list"></i>
                            <p>Summaries will appear as the meeting progresses</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Stats Bar -->
        <footer class="stats-bar">
            <div class="stat-item">
                <i class="fas fa-file-alt"></i>
                <span>Total Words: <strong id="totalWords">0</strong></span>
            </div>
            <div class="stat-item">
                <i class="fas fa-paragraph"></i>
                <span>Total Sentences: <strong id="totalSentences">0</strong></span>
            </div>
            <div class="stat-item">
                <i class="fas fa-question"></i>
                <span>Questions: <strong id="totalQuestions">0</strong></span>
            </div>

            <div class="export-buttons">
                <button class="btn btn-secondary btn-sm" id="clearBtn">
                    <i class="fas fa-trash-alt"></i>
                    <span>Clear Records</span>
                </button>
                <button class="btn btn-info btn-sm" id="exportAudioBtn" disabled>
                    <i class="fas fa-file-audio"></i>
                    <span>Export Audio</span>
                </button>
                <button class="btn btn-export" id="exportBtn">
                    <i class="fas fa-download"></i>
                    <span>Export Minutes</span>
                </button>
            </div>
        </footer>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-cog"></i> Settings</h3>
                <button class="btn-close" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Gemini AI Settings -->
                <div class="setting-section">
                    <h4><i class="fas fa-robot"></i> Gemini AI Settings</h4>
                    <div class="setting-group">
                        <label>Gemini API Key</label>
                        <div class="api-key-input-wrapper">
                            <input type="password" id="geminiApiKey" placeholder="Enter your API Key">
                            <button type="button" class="btn-toggle-visibility" id="toggleApiKeyVisibility">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <p class="setting-hint" style="margin-top: 8px; font-size: 0.8rem;">
                            <i class="fas fa-external-link-alt"></i> 
                            <a href="https://aistudio.google.com/app/apikey" target="_blank" style="color: var(--primary); text-decoration: underline;">Get a free API key from Google AI Studio</a>
                        </p>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="autoAnswer" checked>
                            Auto AI Answer on Question Detection
                        </label>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="enableAutoSummary" checked>
                            üìù Periodic Meeting Summary
                        </label>
                    </div>
                    <div class="api-status" id="apiStatus">
                        <span class="status-dot"></span>
                        <span class="status-text">API Key Not Set</span>
                    </div>
                </div>

                <div class="setting-divider"></div>

                <!-- Speaker Detection Settings -->
                <div class="setting-section">
                    <h4><i class="fas fa-users"></i> Speaker Detection Settings</h4>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="enableSpeakerDetection" checked>
                            üë§ Auto Speaker Distinction
                        </label>
                    </div>
                </div>

                <div class="setting-divider"></div>

                <!-- Meeting Context Settings -->
                <div class="setting-section">
                    <h4><i class="fas fa-clipboard-list"></i> Meeting Context</h4>
                    <div class="setting-group">
                        <label>Meeting Topic / Project Name</label>
                        <textarea id="meetingContext" rows="3"
                            placeholder="e.g.: New Product Development Meeting&#10;Keywords: Market Analysis, ROI, Launch Schedule"></textarea>
                    </div>
                    <div class="setting-group">
                        <label>Priority Terms (comma-separated)</label>
                        <input type="text" id="priorityTerms" placeholder="e.g.: ProjectName, ProductCode, TechnicalTerms">
                    </div>
                    <div class="context-status" id="contextStatus">
                        <i class="fas fa-info-circle"></i>
                        <span>Context Not Set</span>
                    </div>
                </div>

                <div class="setting-divider"></div>

                <!-- Audio Processing Settings -->
                <div class="setting-section">
                    <h4><i class="fas fa-microphone-alt"></i> Audio Processing Settings</h4>
                    <p class="setting-hint" style="margin-bottom: 12px; font-size: 0.75rem; color: var(--text-dim);">If conversation is cut off, try turning off noise suppression.</p>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="enableNoiseSuppression" checked>
                            üîá Noise Suppression
                        </label>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="enableEchoCancellation" checked>
                            üîä Echo Cancellation
                        </label>
                    </div>
                </div>

                <div class="setting-divider"></div>

                <!-- Language Settings -->
                <div class="setting-section">
                    <h4><i class="fas fa-globe"></i> Language Settings</h4>
                    <div class="setting-group">
                        <label>Recognition Language</label>
                        <select id="languageSelect">
                            <option value="ko-KR">üá∞üá∑ ÌïúÍµ≠Ïñ¥</option>
                            <option value="en-US" selected>üá∫üá∏ English (US)</option>
                            <option value="ja-JP">üáØüáµ Êó•Êú¨Ë™û</option>
                            <option value="zh-CN">üá®üá≥ ‰∏≠Êñá (ÁÆÄ‰Ωì)</option>
                        </select>
                    </div>
                </div>

                <div class="setting-divider"></div>

                <!-- General Settings -->
                <div class="setting-section">
                    <h4><i class="fas fa-sliders-h"></i> General Settings</h4>
                    <div class="setting-group">
                        <label>Question Detection Sensitivity</label>
                        <div class="slider-container">
                            <input type="range" id="sensitivityRange" min="1" max="5" value="3">
                            <span id="sensitivityValue">Normal</span>
                        </div>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="soundAlert" checked>
                            Sound Alert on Question Detection
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Load Scripts -->
    <script src="js/speech-recognition.js"></script>
    <script src="js/ai-analysis.js"></script>
    <script src="js/gemini-api.js"></script>
    <script src="js/text-corrector.js"></script>
    <script src="js/audio-recorder.js"></script>
    <script src="js/speaker-detection.js"></script>
    <script src="js/meeting-export.js"></script>
    <script src="js/enhanced-app-v2.js"></script>
</body>

</html>